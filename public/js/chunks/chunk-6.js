(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"0sRa":function(e,n,t){var s=t("zYRm");"string"==typeof s&&(s=[[e.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};t("aET+")(s,i);s.locals&&(e.exports=s.locals)},"5OWj":function(e,n,t){"use strict";var s=t("L2JU");function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},s=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.forEach(function(n){r(e,n,t[n])})}return e}function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.a={methods:i({},Object(s.mapActions)("events",["clearForm"])),computed:i({},Object(s.mapState)({events:function(e){return e.events},subEvents:function(e){return e.subEvents},invitations:function(e){return e.invitations}}))}},"A/j7":function(e,n,t){"use strict";t.r(n);var s=t("jx1L"),i=t("5OWj"),r=t("N4/z"),o=t("CtO9"),a={name:"subEvents",uri:"events/{events.selected.id}/sub-events",performLoad:!1},u={props:["mode"],mixins:[s.a,i.a,r.a,o.a],data:function(){return this.$store.dispatch("environment/loadSubEvents"),this.$store.dispatch("environment/loadCostumes"),this.$store.dispatch("environment/loadSectors"),{service:a}},methods:{changeText:function(e){this.$store.commit("subEvents/mutateSetFormField",{field:e.field,value:e.text})},selectAddressInsideEvent:function(e){this.$store.commit("subEvents/mutateSetFormField",{object:"address",field:"zipcode",value:e.zipcode}),this.$store.commit("subEvents/mutateSetFormField",{object:"address",field:"street",value:e.street}),this.$store.commit("subEvents/mutateSetFormField",{object:"address",field:"number",value:e.number}),this.$store.commit("subEvents/mutateSetFormField",{object:"address",field:"complement",value:e.complement}),this.$store.commit("subEvents/mutateSetFormField",{object:"address",field:"neighbourhood",value:e.neighbourhood}),this.$store.commit("subEvents/mutateSetFormField",{object:"address",field:"city",value:e.city}),this.$store.commit("subEvents/mutateSetFormField",{object:"address",field:"state",value:e.state}),this.$store.commit("subEvents/mutateSetFormField",{object:"address",field:"latitude",value:e.latitude}),this.$store.commit("subEvents/mutateSetFormField",{object:"address",field:"longitude",value:e.longitude})},fillAdditionalFormFields:function(){this.$store.commit("subEvents/mutateSetFormField",{field:"event_id",value:this.events.selected.id})},exceptSubEventList:function(e,n,t){var s=clone(e);return s.rows=except(e.rows,n),s.rows=_.filter(s.rows,function(e){return!t||!e.event_id||e.event_id==t}),s}},mounted:function(){}},c=(t("e4Q/"),t("KHd+")),l=Object(c.a)(u,function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{staticClass:"py-2 text-center"},[t("h1",[e._v(e._s(e.events.selected.name))]),e._v(" "),t("h2",[e._v("\n            "+e._s("create"===this.mode?"Novo ":"Editar ")+"Sub Evento\n        ")]),e._v(" "),t("h2",[e._v("\n            "+e._s(e.subEvents.form.fields.name?e.subEvents.form.fields.name:"")+"\n        ")])]),e._v(" "),t("div",{staticClass:"row justify-content-center"},[t("div",{staticClass:"col-8"},[t("form",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 mb-3"},[t("div",{staticClass:"row pt-1 pb-1 bg-primary-lighter"},[t("div",{staticClass:"col-6 text-right"},[t("app-input",{attrs:{name:"send_invitations",label:"pode enviar convites",type:"checkbox",required:!0,form:e.form,inline:"true"},model:{value:e.subEvents.form.fields.send_invitations,callback:function(n){e.$set(e.subEvents.form.fields,"send_invitations",n)},expression:"subEvents.form.fields.send_invitations"}})],1),e._v(" "),t("div",{staticClass:"col-6"},[t("app-input",{attrs:{name:"send_credentials",label:"pode enviar credenciais",type:"checkbox",required:!0,form:e.form,inline:"true"},model:{value:e.subEvents.form.fields.send_credentials,callback:function(n){e.$set(e.subEvents.form.fields,"send_credentials",n)},expression:"subEvents.form.fields.send_credentials"}})],1)]),e._v(" "),t("app-input",{attrs:{name:"name",label:"Nome",required:!0,form:e.form},model:{value:e.subEvents.form.fields.name,callback:function(n){e.$set(e.subEvents.form.fields,"name",n)},expression:"subEvents.form.fields.name"}}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 col-md-6"},[t("app-input",{attrs:{name:"date",label:"Data",type:"date",required:!0,form:e.form},model:{value:e.subEvents.form.fields.date,callback:function(n){e.$set(e.subEvents.form.fields,"date",n)},expression:"subEvents.form.fields.date"}})],1),e._v(" "),t("div",{staticClass:"col-sm-12 col-md-6"},[t("app-input",{attrs:{name:"confirmations_end_date",label:"Data final para confirmação",type:"date",required:!0,form:e.form},model:{value:e.subEvents.form.fields.confirmations_end_date,callback:function(n){e.$set(e.subEvents.form.fields,"confirmations_end_date",n)},expression:"subEvents.form.fields.confirmations_end_date"}})],1)]),e._v(" "),t("app-input",{attrs:{name:"time",label:"Horário",type:"time",required:!0,form:e.form},model:{value:e.subEvents.form.fields.time,callback:function(n){e.$set(e.subEvents.form.fields,"time",n)},expression:"subEvents.form.fields.time"}}),e._v(" "),t("app-input",{attrs:{name:"place",label:"Local",required:!0,form:e.form,rows:"10",cols:"100"},model:{value:e.subEvents.form.fields.place,callback:function(n){e.$set(e.subEvents.form.fields,"place",n)},expression:"subEvents.form.fields.place"}}),e._v(" "),t("app-select",{attrs:{name:"associated_subevent_id",label:"Subevento Associado",required:!0,form:e.form,options:e.exceptSubEventList(e.environment.tables.sub_events,e.subEvents.form.fields.id,e.subEvents.form.fields.event_id)},model:{value:e.subEvents.form.fields.associated_subevent_id,callback:function(n){e.$set(e.subEvents.form.fields,"associated_subevent_id",n)},expression:"\n                                subEvents.form.fields.associated_subevent_id\n                            "}}),e._v(" "),t("app-select",{attrs:{name:"costume_id",label:"Traje",required:!0,form:e.form,options:e.environment.tables.costumes},model:{value:e.subEvents.form.fields.costume_id,callback:function(n){e.$set(e.subEvents.form.fields,"costume_id",n)},expression:"subEvents.form.fields.costume_id"}}),e._v(" "),t("app-select",{attrs:{name:"sector_id",label:"Setor",required:!0,form:e.form,options:e.environment.tables.sectors},model:{value:e.subEvents.form.fields.sector_id,callback:function(n){e.$set(e.subEvents.form.fields,"sector_id",n)},expression:"subEvents.form.fields.sector_id"}}),e._v(" "),t("app-markdown-text-area",{attrs:{form:e.form,label:"Email: texto do convite",id:"invitation_text",value:e.subEvents.form.fields.invitation_text},on:{input:function(n){e.changeText({field:"invitation_text",text:n})}}}),e._v(" "),t("app-markdown-text-area",{attrs:{form:e.form,label:"Email: texto de envio das credencials de acesso ao evento",id:"credentials_text",value:e.subEvents.form.fields.credentials_text},on:{input:function(n){e.changeText({field:"credentials_text",text:n})}}}),e._v(" "),t("app-markdown-text-area",{attrs:{form:e.form,label:"Email: texto de agradecimento pela presença",id:"thank_you_text",value:e.subEvents.form.fields.thank_you_text},on:{input:function(n){e.changeText({field:"thank_you_text",text:n})}}}),e._v(" "),t("app-markdown-text-area",{attrs:{form:e.form,label:"Email: texto de declinação do convite",id:"rejection_text",value:e.subEvents.form.fields.rejection_text},on:{input:function(n){e.changeText({field:"rejection_text",text:n})}}}),e._v(" "),"create"==e.mode?t("app-table-panel",{attrs:{title:"Endereços disponíveis ("+e.subEvents.data.available_addresses.length+" endereços)"}},[t("app-table",{attrs:{columns:["#","Endereço"],rows:e.subEvents.data.available_addresses}},e._l(e.subEvents.data.available_addresses,function(n){return t("tr",{staticClass:"cursor-pointer",class:{"cursor-pointer":!0,"bg-primary-lighter text-white":e.isCurrent(n,e.addresses.selected)},on:{click:function(t){e.selectAddressInsideEvent(n)}}},[t("td",[e._v(e._s(n.id))]),e._v(" "),t("td",[e._v(e._s(n.full_address))])])}),0)],1):e._e(),e._v(" "),t("app-address-field",{attrs:{form:e.subEvents.form,address:e.subEvents.form.fields.address,"google-maps":e.environment.google_maps}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 text-right mb-3"},[t("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"submit"},on:{click:function(n){n.preventDefault(),e.saveModel()}}},[e._v("\n                            gravar\n                        ")]),e._v(" "),t("router-link",{staticClass:"btn btn-success",attrs:{to:"/events",tag:"button"}},[e._v("\n                            cancelar\n                        ")])],1)])])])])])},[],!1,null,null,null);l.options.__file="SubEventsForm.vue";n.default=l.exports},CtO9:function(e,n,t){"use strict";n.a={methods:{can:function(){if(this.environment.user.hasOwnProperty("permissions"))for(var e=0;e<arguments.length;e++){if(JSON.parse(this.environment.user.permissions).hasOwnProperty(arguments[e]))return!0}return!1},cannot:function(e){return!this.can(e)}}}},"N4/z":function(e,n,t){"use strict";var s=t("L2JU");function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},s=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.forEach(function(n){r(e,n,t[n])})}return e}function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.a={methods:i({},Object(s.mapActions)("subEvents",["clearForm"])),computed:i({},Object(s.mapState)({addresses:function(e){return e.addresses},events:function(e){return e.events},subEvents:function(e){return e.subEvents}}))}},"e4Q/":function(e,n,t){"use strict";var s=t("0sRa");t.n(s).a},jx1L:function(e,n,t){"use strict";n.a={data:function(){return{loading:{environment:!1,table:!1}}},computed:{filterText:{get:function(){return this.$store.state[this.service.name].data.filter.text},set:function(e){return this.$store.dispatch(this.service.name+"/mutateSetQueryFilterText",e)}},emptyForm:function(){return this.$store.state[this.service.name].emptyForm},form:function(){return this.$store.state[this.service.name].form},selected:function(){return this.$store.state[this.service.name].selected},environment:function(){return this.$store.state.environment},pagination:function(){return this.$store.state[this.service.name].data.links?this.$store.state[this.service.name].data.links.pagination:{}},perPage:{get:function(){return this.pagination.per_page},set:function(e){this.$store.dispatch(this.service.name+"/setPerPage",e)}}},methods:{load:function(){return this.$store.commit(this.service.name+"/mutateSetPerPage",this.environment.user.per_page),this.$store.dispatch(this.service.name+"/load")},select:function(e){return this.$store.dispatch(this.service.name+"/select",e)},save:function(e){return this.$store.dispatch(this.service.name+"/save",e)},mutateSetErrors:function(e){this.$store.commit(this.service.name+"/mutateSetErrors",e)},mutateFormData:function(e){this.$store.commit(this.service.name+"/mutateFormData",e)},mutateSetFormField:function(e){this.$store.commit(this.service.name+"/mutateSetFormField",e)},mutateSetService:function(e){this.$store.commit(this.service.name+"/mutateSetService",e)},isLoading:function(){return this.loading.environment||this.loading.table},boot:function(){var e=this;this.mutateSetService(this.service),!this.service.hasOwnProperty("performLoad")||this.service.performLoad?this.load().then(function(){e.fillFormWhenEditing()}):this.fillFormWhenEditing(),this.$store.dispatch(this.service.name+"/subscribeToTableEvents")},fillFormWhenEditing:function(){var e=this,n="update"===this.mode?_.find(this.rows,function(n){return n.id===e.$route.params.id}):this.form?clone(this.emptyForm):{};this.mutateFormData(n),this.mutateSetErrors({}),this.fillAdditionalFormFields()},fillAdditionalFormFields:function(){},back:function(){this.$router.back()},saveModel:function(){var e=this;this.save(this.mode).then(function(){e.back(),e.clearForm()})},gotoPage:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(t=t||this.pagination).current_page!==e&&(e<1||e>t.last_page||this.$store.dispatch((n||this.service.name)+"/setCurrentPage",e))},isCurrent:function(e,n){return e.id===n.id},setPerPage:function(){this.$store.commit(this.service.name+"/mutateSetPerPage",this.environment.user.per_page)},getDataUrl:function(){return buildApiUrl(this.service.uri,this.$store.state)},getStoreUrl:function(){return buildApiUrl(this.service.uri,this.$store.state)},getUpdateStoreUrl:function(){return buildApiUrl(this.service.uri,this.$store.state)}},mounted:function(){this.boot()}}},zYRm:function(e,n,t){(e.exports=t("I1BE")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}}]);